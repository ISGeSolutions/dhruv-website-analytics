!function(e){e.browserTest=function(r,n){var t="unknown",o="X",i=function(e,r){for(var n=0;n<r.length;n+=1)e=e.replace(r[n][0],r[n][1]);return e},a=function(r,n,a,s){var c={name:i((n.exec(r)||[t,t])[1],a)};return c[c.name]=!0,c.version=(s.exec(r)||[o,o,o,o])[3],c.name.match(/safari/)&&c.version>400&&(c.version="2.0"),"presto"===c.name&&(c.version=e.browser.version>9.27?"futhark":"linear_b"),c.versionNumber=parseFloat(c.version,10)||0,c.versionX=c.version!==o?(c.version+"").substr(0,1):o,c.className=c.name+c.versionX,c};r=(r.match(/Opera|Navigator|Minefield|KHTML|Chrome/)?i(r,[[/(Firefox|MSIE|KHTML,\slike\sGecko|Konqueror)/,""],["Chrome Safari","Chrome"],["KHTML","Konqueror"],["Minefield","Firefox"],["Navigator","Netscape"]]):r).toLowerCase(),e.browser=e.extend(n?{}:e.browser,a(r,/(camino|chrome|firefox|netscape|konqueror|lynx|msie|opera|safari)/,[],/(camino|chrome|firefox|netscape|netscape6|opera|version|konqueror|lynx|msie|safari)(\/|\s)([a-z0-9\.\+]*?)(\;|dev|rel|\s|$)/)),e.layout=a(r,/(gecko|konqueror|msie|opera|webkit)/,[["konqueror","khtml"],["msie","trident"],["opera","presto"]],/(applewebkit|rv|konqueror|msie)(\:|\/|\s)([a-z0-9\.]*?)(\;|\)|\s)/),e.os={name:(/(win|mac|linux|sunos|solaris|iphone)/.exec(navigator.platform.toLowerCase())||[t])[0].replace("sunos","solaris")},n||e("html").addClass([e.os.name,e.browser.name,e.browser.className,e.layout.name,e.layout.className].join(" "))},e.browserTest(navigator.userAgent)}(jQuery),new function(e){var r=e.separator||"&",n=e.spaces===!1?!1:!0,t=(e.suffix===!1?"":"[]",e.prefix===!1?!1:!0),o=t?e.hash===!0?"#":"?":"",i=e.numbers===!1?!1:!0;jQuery.query=new function(){var e=function(e,r){return void 0!=e&&null!==e&&(r?e.constructor==r:!0)},t=function(e){for(var r,n=/\[([^[]*)\]/g,t=/^([^[]+)(\[.*\])?$/.exec(e),o=t[1],i=[];r=n.exec(t[2]);)i.push(r[1]);return[o,i]},a=function(r,n,t){var o=n.shift();if("object"!=typeof r&&(r=null),""===o)if(r||(r=[]),e(r,Array))r.push(0==n.length?t:a(null,n.slice(0),t));else if(e(r,Object)){for(var i=0;null!=r[i++];);r[--i]=0==n.length?t:a(r[i],n.slice(0),t)}else r=[],r.push(0==n.length?t:a(null,n.slice(0),t));else if(o&&o.match(/^\s*[0-9]+\s*$/)){var s=parseInt(o,10);r||(r=[]),r[s]=0==n.length?t:a(r[s],n.slice(0),t)}else{if(!o)return t;var s=o.replace(/^\s*|\s*$/g,"");if(r||(r={}),e(r,Array)){for(var c={},i=0;i<r.length;++i)c[i]=r[i];r=c}r[s]=0==n.length?t:a(r[s],n.slice(0),t)}return r},s=function(e){var r=this;return r.keys={},e.queryObject?jQuery.each(e.get(),function(e,n){r.SET(e,n)}):jQuery.each(arguments,function(){var e=""+this;e=e.replace(/^[?#]/,""),e=e.replace(/[&]$/,""),n&&(e=e.replace(/[+]/g," ")),jQuery.each(e.split(/[&]/),function(){var e=decodeURIComponent(this.split("=")[0]||""),n=decodeURIComponent(this.split("=")[1]||"");e&&(i&&(/^[+-]?[0-9]+\.[0-9]*$/.test(n)?n=parseFloat(n):/^[+-]?[0-9]+$/.test(n)&&(n=parseInt(n,10))),n=n||0===n?n:!0,n!==!1&&n!==!0&&"number"!=typeof n&&(n=n),r.SET(e,n))})}),r};return s.prototype={queryObject:!0,has:function(r,n){var t=this.get(r);return e(t,n)},GET:function(r){if(!e(r))return this.keys;for(var n=t(r),o=n[0],i=n[1],a=this.keys[o];null!=a&&0!=i.length;)a=a[i.shift()];return"number"==typeof a?a:a||""},get:function(r){var n=this.GET(r);return e(n,Object)?jQuery.extend(!0,{},n):e(n,Array)?n.slice(0):n},SET:function(r,n){var o=e(n)?n:null,i=t(r),s=i[0],c=i[1],u=this.keys[s];return this.keys[s]=a(u,c.slice(0),o),this},set:function(e,r){return this.copy().SET(e,r)},REMOVE:function(e){return this.SET(e,null).COMPACT()},remove:function(e){return this.copy().REMOVE(e)},EMPTY:function(){var e=this;return jQuery.each(e.keys,function(r,n){delete e.keys[r]}),e},load:function(e){var r=e.replace(/^.*?[#](.+?)(?:\?.+)?$/,"$1"),n=e.replace(/^.*?[?](.+?)(?:#.+)?$/,"$1");return new s(e.length==n.length?"":n,e.length==r.length?"":r)},empty:function(){return this.copy().EMPTY()},copy:function(){return new s(this)},COMPACT:function(){function r(n){function t(r,n,t){e(r,Array)?r.push(t):r[n]=t}var o="object"==typeof n?e(n,Array)?[]:{}:n;return"object"==typeof n&&jQuery.each(n,function(n,i){return e(i)?void t(o,n,r(i)):!0}),o}return this.keys=r(this.keys),this},compact:function(){return this.copy().COMPACT()},toString:function(){var t=[],i=[],a=function(e){return e+="",n&&(e=e.replace(/ /g,"+")),encodeURIComponent(e)},s=function(r,n,t){if(e(t)&&t!==!1){var o=[a(n)];t!==!0&&(o.push("="),o.push(a(t))),r.push(o.join(""))}},c=function(e,r){var n=function(e){return r&&""!=r?[r,"[",e,"]"].join(""):[e].join("")};jQuery.each(e,function(e,r){"object"==typeof r?c(r,n(e)):s(i,n(e),r)})};return c(this.keys),i.length>0&&t.push(o),t.push(i.join(r)),t.join("")}},new s(location.search,location.hash)}}(jQuery.query||{});var analytics=new function(){function e(e,r,n){var t=new Date;t.setTime(t.getTime()+24*n*60*60*1e3);var o="expires="+t.toGMTString();document.cookie=e+"="+r+"; "+o+"; path=/"}function r(r){e(r,"",-1)}function n(e){for(var r=e+"=",n=document.cookie.split(";"),t=0;t<n.length;t++){var o=n[t].trim();if(0==o.indexOf(r))return o.substring(r.length,o.length)}return""}function t(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=r.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}function o(e,r){return c(e)||"MacOS"!=e||"iPad"!=r?jQuery.browser&&jQuery.browser.name?a(jQuery.browser.name)+" ("+jQuery.browser.version+")"||"":"":-1!=navigator.userAgent.toLowerCase().indexOf("crios")?a("chrome")+" ("+navigator.userAgent.substr(navigator.userAgent.toLowerCase().lastIndexOf("crios/")+6,navigator.userAgent.toLowerCase().indexOf("mobile/")-navigator.userAgent.toLowerCase().lastIndexOf("crios/")-7)+")"||"":-1!=navigator.userAgent.toLowerCase().indexOf("chrome")?a("chrome")+" ("+navigator.userAgent.substr(navigator.userAgent.toLowerCase().lastIndexOf("chrome/")+6,navigator.userAgent.toLowerCase().indexOf("mobile/")-navigator.userAgent.toLowerCase().lastIndexOf("chrome/")-7)+")"||"":jQuery.browser&&jQuery.browser.name?a(jQuery.browser.name)+" ("+jQuery.browser.version+")"||"":void 0}function i(){var e="Unknown OS";return-1!=navigator.appVersion.indexOf("Win")&&(e="Windows"),-1!=navigator.appVersion.indexOf("Mac")&&(e="MacOS"),-1!=navigator.appVersion.indexOf("X11")&&(e="UNIX"),-1!=navigator.appVersion.indexOf("Linux")&&(e="Linux"),e}function a(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function s(){var e=navigator.userAgent.toLowerCase(),r="";return/ipad/i.test(e)&&-1!=navigator.platform.indexOf("iPad")&&(r="iPad"),/iphone/i.test(e)&&(r="iPhone"),/ipod/i.test(e)&&(r="iPod"),/android/i.test(e)&&(r="Android"),/blackberry/i.test(e)&&(r="Blackberry"),/webos/i.test(e)&&(r="WebOS"),/windows phone/i.test(e)&&(r="Windows Phone"),c(r)&&(r="Desktop"),r}function c(e){var r=!0;return e&&("string"==typeof e?e.length>0&&(r=!1):r=!1),r}var u=t("code"),l="";if(u){var f=n("analytics-clientcode");""!=f&&r("analytics-clientcode"),u=("0000000000"+u).slice(-10),e("analytics-clientcode",u,365)}if(u=n("analytics-clientcode"),u&&""!=u&&"000000true"!=u){$.getJSON("//api.ipify.org?format=jsonp&callback=?",function(e){l=e.ip});var p=io.connect("https://blacktomato-website-analytics.herokuapp.com:443");p.on("connect",function(){var e={accountcode:u,url:window.location.href,date:"/Date("+(new Date).getTime()+")/",device:s()||"",os:i()||"",browser:o(i(),s())||"",ip:l};p.emit("analytics_msg",e),p.disconnect()})}};