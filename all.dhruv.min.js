!function(e){e.browserTest=function(n,r){var t="unknown",o="X",a=function(e,n){for(var r=0;r<n.length;r+=1)e=e.replace(n[r][0],n[r][1]);return e},i=function(n,r,i,s){var u={name:a((r.exec(n)||[t,t])[1],i)};return u[u.name]=!0,u.version=(s.exec(n)||[o,o,o,o])[3],u.name.match(/safari/)&&u.version>400&&(u.version="2.0"),"presto"===u.name&&(u.version=e.browser.version>9.27?"futhark":"linear_b"),u.versionNumber=parseFloat(u.version,10)||0,u.versionX=u.version!==o?(u.version+"").substr(0,1):o,u.className=u.name+u.versionX,u};n=(n.match(/Opera|Navigator|Minefield|KHTML|Chrome/)?a(n,[[/(Firefox|MSIE|KHTML,\slike\sGecko|Konqueror)/,""],["Chrome Safari","Chrome"],["KHTML","Konqueror"],["Minefield","Firefox"],["Navigator","Netscape"]]):n).toLowerCase(),e.browser=e.extend(r?{}:e.browser,i(n,/(camino|chrome|firefox|netscape|konqueror|lynx|msie|opera|safari)/,[],/(camino|chrome|firefox|netscape|netscape6|opera|version|konqueror|lynx|msie|safari)(\/|\s)([a-z0-9\.\+]*?)(\;|dev|rel|\s|$)/)),e.layout=i(n,/(gecko|konqueror|msie|opera|webkit)/,[["konqueror","khtml"],["msie","trident"],["opera","presto"]],/(applewebkit|rv|konqueror|msie)(\:|\/|\s)([a-z0-9\.]*?)(\;|\)|\s)/),e.os={name:(/(win|mac|linux|sunos|solaris|iphone)/.exec(navigator.platform.toLowerCase())||[t])[0].replace("sunos","solaris")},r||e("html").addClass([e.os.name,e.browser.name,e.browser.className,e.layout.name,e.layout.className].join(" "))},e.browserTest(navigator.userAgent)}(jQuery),new function(e){var n=e.separator||"&",r=!1!==e.spaces,t=(e.suffix,!1!==e.prefix?!0===e.hash?"#":"?":""),o=!1!==e.numbers;jQuery.query=new function(){var e=function(e,n){return null!=e&&null!==e&&(!n||e.constructor==n)},a=function(e){for(var n,r=/\[([^[]*)\]/g,t=/^([^[]+)(\[.*\])?$/.exec(e),o=t[1],a=[];n=r.exec(t[2]);)a.push(n[1]);return[o,a]},i=function(n,r,t){var o=r.shift();if("object"!=typeof n&&(n=null),""===o)if(n||(n=[]),e(n,Array))n.push(0==r.length?t:i(null,r.slice(0),t));else if(e(n,Object)){for(var a=0;null!=n[a++];);n[--a]=0==r.length?t:i(n[a],r.slice(0),t)}else(n=[]).push(0==r.length?t:i(null,r.slice(0),t));else if(o&&o.match(/^\s*[0-9]+\s*$/)){n||(n=[]),n[s=parseInt(o,10)]=0==r.length?t:i(n[s],r.slice(0),t)}else{if(!o)return t;var s=o.replace(/^\s*|\s*$/g,"");if(n||(n={}),e(n,Array)){var u={};for(a=0;a<n.length;++a)u[a]=n[a];n=u}n[s]=0==r.length?t:i(n[s],r.slice(0),t)}return n},s=function(e){var n=this;return n.keys={},e.queryObject?jQuery.each(e.get(),function(e,r){n.SET(e,r)}):jQuery.each(arguments,function(){var e=""+this;e=(e=e.replace(/^[?#]/,"")).replace(/[&]$/,""),r&&(e=e.replace(/[+]/g," ")),jQuery.each(e.split(/[&]/),function(){var e=decodeURIComponent(this.split("=")[0]||""),r=decodeURIComponent(this.split("=")[1]||"");e&&(o&&(/^[+-]?[0-9]+\.[0-9]*$/.test(r)?r=parseFloat(r):/^[+-]?[0-9]+$/.test(r)&&(r=parseInt(r,10))),!1!==(r=!r&&0!==r||r)&&!0!==r&&"number"!=typeof r&&(r=r),n.SET(e,r))})}),n};return s.prototype={queryObject:!0,has:function(n,r){var t=this.get(n);return e(t,r)},GET:function(n){if(!e(n))return this.keys;for(var r=a(n),t=r[0],o=r[1],i=this.keys[t];null!=i&&0!=o.length;)i=i[o.shift()];return"number"==typeof i?i:i||""},get:function(n){var r=this.GET(n);return e(r,Object)?jQuery.extend(!0,{},r):e(r,Array)?r.slice(0):r},SET:function(n,r){var t=e(r)?r:null,o=a(n),s=o[0],u=o[1],c=this.keys[s];return this.keys[s]=i(c,u.slice(0),t),this},set:function(e,n){return this.copy().SET(e,n)},REMOVE:function(e){return this.SET(e,null).COMPACT()},remove:function(e){return this.copy().REMOVE(e)},EMPTY:function(){var e=this;return jQuery.each(e.keys,function(n,r){delete e.keys[n]}),e},load:function(e){var n=e.replace(/^.*?[#](.+?)(?:\?.+)?$/,"$1"),r=e.replace(/^.*?[?](.+?)(?:#.+)?$/,"$1");return new s(e.length==r.length?"":r,e.length==n.length?"":n)},empty:function(){return this.copy().EMPTY()},copy:function(){return new s(this)},COMPACT:function(){return this.keys=function n(r){var t="object"==typeof r?e(r,Array)?[]:{}:r;"object"==typeof r&&jQuery.each(r,function(r,o){if(!e(o))return!0;!function(n,r,t){e(n,Array)?n.push(t):n[r]=t}(t,r,n(o))});return t}(this.keys),this},compact:function(){return this.copy().COMPACT()},toString:function(){var o=[],a=[],i=function(e){return e+="",r&&(e=e.replace(/ /g,"+")),encodeURIComponent(e)},s=function(n,r){var t=function(e){return r&&""!=r?[r,"[",e,"]"].join(""):[e].join("")};jQuery.each(n,function(n,r){"object"==typeof r?s(r,t(n)):function(n,r,t){if(e(t)&&!1!==t){var o=[i(r)];!0!==t&&(o.push("="),o.push(i(t))),n.push(o.join(""))}}(a,t(n),r)})};return s(this.keys),a.length>0&&o.push(t),o.push(a.join(n)),o.join("")}},new s(location.search,location.hash)}}(jQuery.query||{});var analytics=new function(){this.EmitAnalyticsData=function(){var e="",n="",r="",t="",o="";if(document.getElementById("dhruv_analytics_accountcode")&&(e=document.getElementById("dhruv_analytics_accountcode").value||""),e&&(e=("0000000000"+e).slice(-10)),e&&""!=e&&"000000true"!=e){$.getJSON("//api.ipify.org?format=jsonp&callback=?",function(e){o=e.ip}),document.getElementById("dhruv_analytics_product")&&(n=document.getElementById("dhruv_analytics_product").value||""),document.getElementById("dhruv_analytics_bkgno")&&(r=document.getElementById("dhruv_analytics_bkgno").value||""),document.getElementById("dhruv_analytics_quoteno")&&(t=document.getElementById("dhruv_analytics_quoteno").value||"");var a=io.connect("https://blacktomato-website-analytics.herokuapp.com:443");a.on("connect",function(){var u={accountcode:e,url:window.location.href,date:"/Date("+(new Date).getTime()+")/",device:c()||"",os:s()||"",browser:i(s(),c())||"",ip:o,dp:n,b:r,q:t};a.emit("analytics_msg",u),a.disconnect()})}function i(e,n){return l(e)||"MacOS"!=e||"iPad"!=n?jQuery.browser&&jQuery.browser.name&&u(jQuery.browser.name)+" ("+jQuery.browser.version+")"||"":-1!=navigator.userAgent.toLowerCase().indexOf("crios")?u("chrome")+" ("+navigator.userAgent.substr(navigator.userAgent.toLowerCase().lastIndexOf("crios/")+6,navigator.userAgent.toLowerCase().indexOf("mobile/")-navigator.userAgent.toLowerCase().lastIndexOf("crios/")-7)+")"||"":-1!=navigator.userAgent.toLowerCase().indexOf("chrome")?u("chrome")+" ("+navigator.userAgent.substr(navigator.userAgent.toLowerCase().lastIndexOf("chrome/")+6,navigator.userAgent.toLowerCase().indexOf("mobile/")-navigator.userAgent.toLowerCase().lastIndexOf("chrome/")-7)+")"||"":jQuery.browser&&jQuery.browser.name?u(jQuery.browser.name)+" ("+jQuery.browser.version+")"||"":void 0}function s(){var e="Unknown OS";return-1!=navigator.appVersion.indexOf("Win")&&(e="Windows"),-1!=navigator.appVersion.indexOf("Mac")&&(e="MacOS"),-1!=navigator.appVersion.indexOf("X11")&&(e="UNIX"),-1!=navigator.appVersion.indexOf("Linux")&&(e="Linux"),e}function u(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function c(){var e=navigator.userAgent.toLowerCase(),n="";return/ipad/i.test(e)&&-1!=navigator.platform.indexOf("iPad")&&(n="iPad"),/iphone/i.test(e)&&(n="iPhone"),/ipod/i.test(e)&&(n="iPod"),/android/i.test(e)&&(n="Android"),/blackberry/i.test(e)&&(n="Blackberry"),/webos/i.test(e)&&(n="WebOS"),/windows phone/i.test(e)&&(n="Windows Phone"),l(n)&&(n="Desktop"),n}function l(e){var n=!0;return e&&("string"==typeof e?e.length>0&&(n=!1):n=!1),n}},$("document").ready(function(e){analytics.EmitAnalyticsData()})};